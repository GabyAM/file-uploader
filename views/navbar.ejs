<nav>
  <div class="actions-section">
    <button id="show-file-form-button">
      <%- include('./icons/file_upload.ejs', {size: '1.5em'}) %>
      <span>Upload file</span>
    </button>
    <button id="show-folder-form-button">
      <%- include('./icons/folder_create.ejs', {size: '1.5em'}) %>
      <span>Add folder</span>
    </button>
  </div>
  <div class="items-section">
    <h2>Your space</h2>
    <div>
      <ul class="items-list">
        <% folders.forEach(folder => { %>
        <a href="/folder/<%= folder.id %>">
          <li
            class="<%= locals.selectedFolder && selectedFolder === folder.id ? 'selected' : '' %>"
          >
            <%- include('./icons/folder.ejs', {size: '1.75em'}) %>
            <span><%= folder.name %></span>
          </li>
        </a>
        <% }) %>
        <% rootFiles.forEach(file => { %>
          <a href="/file/<%= file.id %>">
            <li 
              class="<%= locals.selectedFile && selectedFile === file.id ? 'selected' : '' %>"
            >
              <%- include('./icons/file.ejs', {size: '1.75em'}) %>
              <span><%= file.name %></span>
            </li>
          </a>
        <% }) %>
      </ul>
    </div>
  </div>
</nav>
<%- include('file_form', {folders: locals.folders, errors: locals.fileErrors ? fileErrors : null, serverError: locals.fileFormError ? fileFormError : false}) %>
<%- include('folder_form.ejs', 
{errors: locals.folderErrors ? folderErrors : null, 
serverError: locals.folderFormError ? folderFormError : false}) %>
<script>
  const isFileFormOpen = '<%=locals.fileFormOpen%>' === 'true';
  const isFolderFormOpen = '<%=locals.folderFormOpen%>' === 'true';
  const fileForm = document.querySelector('.file-upload-form').parentElement.parentElement;
  const folderForm = document.querySelector('.folder-form').parentElement.parentElement;
  fileForm.style.display = isFileFormOpen ? 'block' : 'none';
  folderForm.style.display = isFolderFormOpen ? 'block' : 'none';
  document.querySelector('#show-file-form-button').addEventListener('click', () => {
    fileForm.querySelector('form').reset();
    fileForm.style.display = 'block';
  });
  document.querySelector('#show-folder-form-button').addEventListener('click', () => {
    folderForm.querySelector('form').reset();
    folderForm.style.display = 'block';
  });
</script>
